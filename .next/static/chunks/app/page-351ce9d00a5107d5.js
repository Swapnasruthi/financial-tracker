(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9293:function(e,t,s){Promise.resolve().then(s.bind(s,2660))},2660:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return q}});var a=s(7437),r=s(2265),n=s(1994),l=s(3335);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,n.W)(t))}let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:i("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});d.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:i("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:i("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:i("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:i("p-6 pt-0",s),...r})});m.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:i("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var x=s(7053);let u=(0,s(535).j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:l=!1,...d}=e,o=l?x.g7:"button";return(0,a.jsx)(o,{className:i(u({variant:r,size:n,className:s})),ref:t,...d})});p.displayName="Button";var f=s(1053),h=s(2489);let j=f.fC,g=f.xz,v=f.h_;f.x8;let N=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(f.aV,{ref:t,className:i("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});N.displayName=f.aV.displayName;let y=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(v,{children:[(0,a.jsx)(N,{}),(0,a.jsxs)(f.VY,{ref:t,className:i("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,a.jsxs)(f.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});y.displayName=f.VY.displayName;let b=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:i("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};b.displayName="DialogHeader";let w=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:i("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};w.displayName="DialogFooter";let C=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(f.Dx,{ref:t,className:i("text-lg font-semibold leading-none tracking-tight",s),...r})});C.displayName=f.Dx.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(f.dk,{ref:t,className:i("text-sm text-muted-foreground",s),...r})}).displayName=f.dk.displayName;let k=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});k.displayName="Input";var E=s(3464);let D=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000",R=E.Z.create({baseURL:D,headers:{"Content-Type":"application/json"}});R.interceptors.request.use(e=>{var t;return console.log("\uD83D\uDE80 ".concat(null===(t=e.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.url)),e},e=>(console.error("❌ Request error:",e),Promise.reject(e))),R.interceptors.response.use(e=>{var t;return console.log("✅ ".concat(e.status," ").concat(null===(t=e.config.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.config.url)),e},e=>{var t;return console.error("❌ Response error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),Promise.reject(e)});let _={getAll:async()=>(await R.get("/api/transactions")).data,create:async e=>(await R.post("/api/transactions",e)).data,update:async e=>(await R.put("/api/transactions",e)).data,delete:async e=>(await R.delete("/api/transactions",{data:{_id:e}})).data};var A=s(7625),T=s(7031),z=s(7059),I=s(2994),F=s(8147),S=s(1699),Z=s(5169),$=s(3574),P=s(407),V=s(525),U=s(3085),B=s(9397),K=s(4630),L=s(8930);function O(e){let t={};return e.forEach(e=>{if("expense"===e.type){let s=e.date.slice(0,7);t[s]=(t[s]||0)+e.amount}}),Object.entries(t).map(e=>{let[t,s]=e;return{month:t,total:s}})}function q(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[l,i]=(0,r.useState)(""),[x,u]=(0,r.useState)(!1),[f,h]=(0,r.useState)(null),[v,N]=(0,r.useState)({amount:"",date:"",description:"",type:"expense"}),[E,D]=(0,r.useState)(""),R=async()=>{try{n(!0),i("");let e=await _.getAll();t(e)}catch(e){i(e instanceof Error?e.message:"Failed to load transactions"),console.error(e)}finally{n(!1)}};(0,r.useEffect)(()=>{R()},[]);let q=()=>{N({amount:"",date:"",description:"",type:"expense"}),D(""),h(null)},H=async()=>{if(!v.amount||!v.date||!v.description){D("All fields are required.");return}if(0>=Number(v.amount)){D("Amount must be a positive number.");return}try{if(D(""),f){let s=await _.update({...f,amount:Number(v.amount),date:v.date,description:v.description,type:v.type});t(e.map(e=>e._id===f._id?s:e))}else{let s=await _.create({amount:Number(v.amount),date:v.date,description:v.description,type:v.type});t([s,...e])}q(),u(!1)}catch(e){D(e instanceof Error?e.message:"Failed to save transaction"),console.error(e)}},W=e=>{h(e),N({amount:e.amount.toString(),date:e.date,description:e.description,type:e.type}),u(!0)},Y=async s=>{try{await _.delete(s),t(e.filter(e=>e._id!==s))}catch(e){i(e instanceof Error?e.message:"Failed to delete transaction"),console.error(e)}},M=function(e){let t=e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),s=e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);return{totalIncome:t,totalExpenses:s,balance:t-s}}(e);return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),(0,a.jsx)("div",{children:"Loading transactions..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Personal Finance Visualizer"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Track and visualize your personal finances"})]}),l&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Error:"}),(0,a.jsx)("span",{className:"ml-2",children:l})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(d,{children:(0,a.jsx)(m,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Income"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",M.totalIncome.toFixed(2)]})]}),(0,a.jsx)(V.Z,{className:"h-8 w-8 text-green-600"})]})})}),(0,a.jsx)(d,{children:(0,a.jsx)(m,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Expenses"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",M.totalExpenses.toFixed(2)]})]}),(0,a.jsx)(U.Z,{className:"h-8 w-8 text-red-600"})]})})}),(0,a.jsx)(d,{children:(0,a.jsx)(m,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Balance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(M.balance>=0?"text-green-600":"text-red-600"),children:["$",M.balance.toFixed(2)]})]}),(0,a.jsx)("div",{className:"h-8 w-8 rounded-full ".concat(M.balance>=0?"bg-green-100":"bg-red-100")})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(d,{className:"lg:col-span-1",children:[(0,a.jsx)(o,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(c,{children:"Transactions"}),(0,a.jsxs)(j,{open:x,onOpenChange:e=>{u(e),e||q()},children:[(0,a.jsx)(g,{asChild:!0,children:(0,a.jsxs)(p,{size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(B.Z,{className:"h-4 w-4"}),"Add Transaction"]})}),(0,a.jsxs)(y,{className:"sm:max-w-md",children:[(0,a.jsx)(b,{children:(0,a.jsx)(C,{children:f?"Edit Transaction":"Add New Transaction"})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),H()},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Amount"}),(0,a.jsx)(k,{placeholder:"0.00",type:"number",step:"0.01",min:"0.01",value:v.amount,onChange:e=>N(t=>({...t,amount:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Date"}),(0,a.jsx)(k,{type:"date",value:v.date,onChange:e=>N(t=>({...t,date:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(k,{placeholder:"What was this transaction for?",value:v.description,onChange:e=>N(t=>({...t,description:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Type"}),(0,a.jsxs)("select",{className:"w-full border rounded-md p-2 bg-background",value:v.type,onChange:e=>N(t=>({...t,type:e.target.value})),children:[(0,a.jsx)("option",{value:"expense",children:"Expense"}),(0,a.jsx)("option",{value:"income",children:"Income"})]})]}),E&&(0,a.jsx)("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded",children:E}),(0,a.jsx)(w,{children:(0,a.jsx)(p,{type:"submit",className:"w-full",children:"Add Transaction"})})]})]})]})]})}),(0,a.jsx)(m,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[0===e.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{children:"No transactions yet."}),(0,a.jsx)("div",{className:"text-sm",children:"Add your first transaction to get started!"})]}),e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-4 bg-white hover:shadow-sm transition-shadow",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 truncate",children:e.description}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.date," • ",e.type]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 ml-4",children:[(0,a.jsxs)("span",{className:"font-semibold ".concat("expense"===e.type?"text-red-600":"text-green-600"),children:["expense"===e.type?"-":"+","$",e.amount.toFixed(2)]}),(0,a.jsx)(p,{variant:"outline",size:"sm",onClick:()=>W(e),className:"text-xs",children:(0,a.jsx)(K.Z,{className:"h-3 w-3"})}),(0,a.jsx)(p,{variant:"destructive",size:"sm",onClick:()=>Y(e._id),className:"text-xs",children:(0,a.jsx)(L.Z,{className:"h-3 w-3"})})]})]},e._id))]})})]}),(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)(d,{children:[(0,a.jsx)(o,{children:(0,a.jsx)(c,{children:"Monthly Expenses"})}),(0,a.jsx)(m,{children:0===O(e).length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCC8"}),(0,a.jsx)("div",{children:"No expense data to display"}),(0,a.jsx)("div",{className:"text-sm",children:"Add some expenses to see the chart"})]}):(0,a.jsx)(A.h,{width:"100%",height:300,children:(0,a.jsxs)(T.v,{data:O(e),children:[(0,a.jsx)(z.K,{dataKey:"month"}),(0,a.jsx)(I.B,{}),(0,a.jsx)(F.u,{formatter:e=>["$".concat(e),"Total"]}),(0,a.jsx)(S.$,{dataKey:"total",fill:"#6366f1",radius:[4,4,0,0]})]})})})]}),(0,a.jsxs)(d,{children:[(0,a.jsx)(o,{children:(0,a.jsx)(c,{children:"Income vs Expenses"})}),(0,a.jsx)(m,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{children:"No data to display"})]}):(0,a.jsx)(A.h,{width:"100%",height:200,children:(0,a.jsxs)(Z.u,{children:[(0,a.jsx)($.b,{data:[{name:"Income",value:M.totalIncome,color:"#10b981"},{name:"Expenses",value:M.totalExpenses,color:"#ef4444"}],cx:"50%",cy:"50%",outerRadius:60,dataKey:"value",children:[{name:"Income",value:M.totalIncome,color:"#10b981"},{name:"Expenses",value:M.totalExpenses,color:"#ef4444"}].map((e,t)=>(0,a.jsx)(P.b,{fill:e.color},"cell-".concat(t)))}),(0,a.jsx)(F.u,{formatter:e=>["$".concat(e),"Amount"]})]})})})]})]})]})]})})}}},function(e){e.O(0,[327,971,117,744],function(){return e(e.s=9293)}),_N_E=e.O()}]);